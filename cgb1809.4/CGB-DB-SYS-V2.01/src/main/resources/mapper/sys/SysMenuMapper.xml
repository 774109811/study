<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.db.sys.dao.SysMenuDao">

    <select id="findZtreeMenuNodes"
            resultType="com.db.common.vo.Node">
        select id,name,parentId
        from sys_menus        
    </select>
    

    <select id="getChildCount"
            resultType="int">
            select count(*)
            from sys_menus
            where parentId=#{id}        
    </select>
    
    <delete id="deleteObject">
           delete from sys_menus
           where id=#{id}
    </delete>

    <select id="findObjects" resultType="map">
        <!-- 方案1 -->
        <!-- 
        select c.*,p.name parentName
        from sys_menus c left join sys_menus p
        on c.parentId=p.id
        -->
        select c.*,(select name
                    from sys_menus p
                    where c.parentId=p.id) parentName
        from sys_menus c
        
    </select>
</mapper>



